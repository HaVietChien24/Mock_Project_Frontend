<div class="container-fluid d-flex bg-light p-0">
  <div class="sidebar">
    <app-admin-side-bar></app-admin-side-bar>
  </div>

  <div class="main-content m-4">
    <!-- <app-admin-header></app-admin-header> -->
    <!-- <button type="button" routerLink="/" class="btn btn-secondary">User</button> -->
    <div class="d-flex justify-content-between align-items-center mb-3">
      <input
        matInput
        placeholder="Search..."
        [(ngModel)]="searchKey"
        (keyup)="applyFilter()"
        class="form-control w-25"
      />
    </div>
    <table
      mat-table
      [dataSource]="data"
      matSort
      class="mat-elevation-z8 custom-table"
    >
      <!-- ID Column -->
      <ng-container matColumnDef="Id">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          class="header-cell"
        >
          Id
        </th>
        <td mat-cell *matCellDef="let element" class="cell">
          {{ element.id }}
        </td>
      </ng-container>

      <!-- Username Column -->
      <ng-container matColumnDef="username">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          class="header-cell"
        >
          User Name
        </th>
        <td mat-cell *matCellDef="let element" class="cell">
          {{ element.username }}
        </td>
      </ng-container>

      <!-- Request Date Column -->
      <ng-container matColumnDef="requestDate">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          class="header-cell"
        >
          Request Date
        </th>
        <td mat-cell *matCellDef="let element" class="cell">
          {{ element.requestDate | customdate }}
        </td>
      </ng-container>

      <!-- Expected Pick Up Date Column -->
      <ng-container matColumnDef="expectedPickUpDate">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          class="header-cell"
        >
          Expected PickUp Date
        </th>
        <td mat-cell *matCellDef="let element" class="cell">
          {{ element.expectedPickUpDate | customdate }}
        </td>
      </ng-container>

      <!-- Expected Return Date Column -->
      <ng-container matColumnDef="expectedReturnDate">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          class="header-cell"
        >
          Expected Return Date
        </th>
        <td mat-cell *matCellDef="let element" class="cell">
          {{ element.expectedReturnDate | customdate }}
        </td>
      </ng-container>
      <ng-container matColumnDef="TotalQuantity">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          class="header-cell"
        >
          Total Book Borrow
        </th>
        <td mat-cell *matCellDef="let element" class="cell">
          {{ element.totalQuantity }}
        </td>
      </ng-container>

      <ng-container matColumnDef="BorrowingStatus">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          class="header-cell"
        >
          Borrowing Status
        </th>
        <td mat-cell *matCellDef="let element" class="cell">
          {{ element.borrowingStatus }}
        </td>
      </ng-container>

      <ng-container matColumnDef="Penalty">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          class="header-cell"
        >
          Penalty
        </th>
        <td mat-cell *matCellDef="let element" class="cell">
          {{ element.penaltyFine }}
        </td>
      </ng-container>
      <ng-container matColumnDef="IsBookPickedUp">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          class="header-cell"
        >
          Is Book Picked Up
        </th>
        <td mat-cell *matCellDef="let element" class="cell">
          {{ element.isBookPickedUp }}
        </td>
      </ng-container>
      <ng-container matColumnDef="IsPickUpLate">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          class="header-cell"
        >
          Is Pick Up Late
        </th>
        <td mat-cell *matCellDef="let element" class="cell">
          {{ element.isPickUpLate }}
        </td>
      </ng-container>

      <!-- Action Column with a Styled Button -->
      <ng-container matColumnDef="Action">
        <th mat-header-cell *matHeaderCellDef class="header-cell">Action</th>
        <td
          mat-cell
          *matCellDef="let element"
          class="cell d-flex justify-content-between align-items-center"
        >
          <button
            class="btn-custom"
            [routerLink]="['/admin/book-borrow-detail', element.id]"
            routerLinkActive="active"
          >
            Details
          </button>
          <button
            class="btn-custom"
            (click)="ConfirmPickUp(element.id)"
            *ngIf="element.showPickUpButton"
          >
            Pickup
          </button>
        </td>
      </ng-container>

      <tr
        mat-header-row
        *matHeaderRowDef="displayedColumns"
        class="header-row"
      ></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: displayedColumns"
        class="data-row"
      ></tr>
    </table>
  </div>
</div>
